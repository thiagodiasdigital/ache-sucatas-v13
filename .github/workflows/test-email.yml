name: Teste de Email

on:
  workflow_dispatch:

jobs:
  test-email:
    name: Enviar Email de Teste
    runs-on: ubuntu-latest

    steps:
      - name: Send test email
        uses: dawidd6/action-send-mail@v3
        with:
          server_address: smtp.gmail.com
          server_port: 587
          secure: true
          username: ${{ secrets.EMAIL_ADDRESS }}
          password: ${{ secrets.EMAIL_APP_PASSWORD }}
          subject: "✅ ACHE SUCATAS - Teste de Notificação"
          to: ${{ secrets.EMAIL_ADDRESS }}
          from: ACHE SUCATAS <${{ secrets.EMAIL_ADDRESS }}>
          body: |
            Parabéns! O sistema de notificação está funcionando.

            ----------------------------------------
            TESTE REALIZADO COM SUCESSO
            ----------------------------------------

            Este email confirma que:
            - Secrets EMAIL_ADDRESS e EMAIL_APP_PASSWORD estão corretos
            - Gmail SMTP está configurado
            - Notificações de falha funcionarão

            ----------------------------------------
            Enviado em: ${{ github.event.repository.updated_at }}
            Repositório: ${{ github.repository }}
            ----------------------------------------
